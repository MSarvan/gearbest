<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart - gearbest.com</title>
    <link rel="stylesheet" href="../style/cart.css">
    <link rel="stylesheet" href="../style/footer.css">
    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,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">
</head>
<body>
    <div class="brand_logo">
        <a href="../index.html"><img src="https://uidesign.gbtcdn.com/GB/images/promotion/2019/a_evan/Gearbest/logo_gearbest.png?imbypass=true" alt=""></a>
    </div>
    <div class="bgrnd">
        <div class="div_1">
            <div class="shop">CART</div>
            <div class="ship">PLACE ORDER</div>
            <div class="pay">PAYMENT</div>
        </div>
        <br><br>
        <div class="main">
            <div class="details">
                <div><span class="item1">Selected items</span> <span class="price1">Qty</span> <span class="qty1">Price</span> <span class="total1">Total</span></div>
                <div class="box1">Order details</div>
                <div id="box2"></div>
            </div>
            <div class="summary">
                <div class="copy">
                    <img src="https://css.gbtcdn.com/imagecache/gbw/img/site/money_back@.png" alt="">
                    <div class="days">
                        <p class="coun">45 days</p>
                        <p>Money Back Guarantee</p>
                    </div>
                    <img src="https://css.gbtcdn.com/imagecache/gbw/img/site/repair@.png" alt="">
                    <div class="days">
                        <p class="coun">360 days</p>
                        <p>Free Repair Warranty</p>
                    </div>
                </div>
                <div class="side_div">
                    <p class="summary1"><h2>Order Summary</h2></p>
                    <p class="subtotal"><span class="subtot">Subtotal</span> <span id="subtot_amt">Rs. </span></p>
                    <p class="discount"><span class="dis">Discount</span> <span class="dis_amt">Rs. 00</span></p>
                    <p class="total"><span class="tot">Total</span> <span id="tot_amt">Rs. </span></p>
                    <p class="promo"><span><input type="text" placeholder="Enter promo code" class="input"></span><span><button class="apply">Apply</button></span></p>
                    <p><a href="./address.html"><button class="checkout_btn">Buy now</button></p></a>
                </div>
            </div>
            <a href="../index.html"><button class="shop_btn">Continue Shopping</button></a>
        </div>
    </div>
    <div id="footer"></div>
</body>
</html>


<script type="module">
    import footer from "../components/footer.js"
    let footer_div = document.getElementById("footer");
    footer_div.innerHTML = footer();
</script>

<script>

    function cartDetails() 
    {
    let user_id = "6218eee38a5ddf577e49674c";
    try {
      fetch(`http://localhost:4800/User/${user_id}`)
        .then((res) => res.json())
        .then((data) => {
          console.log(data.cart);
          displayData(data.cart);
          
        });
    } catch (e) {
      console.log(e.message);
    }
  }
  cartDetails();


  function displayData(details) {
    var cart_items = document.getElementById("box2");
    var sub_Total = document.getElementById("subtot_amt");
    var overall_Total = document.getElementById("tot_amt");
    var count = 1;
    var temp = 0;

    details.forEach((product) => {
      let div = document.createElement("div");
      
      let img = document.createElement("img");
      img.src = product.img;

      let name = document.createElement("p");
      name.setAttribute("id", "pro-name");
      name.innerText = product.name;

      let qty_div = document.createElement("div");
      qty_div.setAttribute("id", "pro-qty");
      var count = 1;

      // Minus Quantity -----------

      let minus = document.createElement("p");
      minus.innerText = "-";

      minus.addEventListener("click", () => {
        if (count > 1) {
          count--;
          show_qty.innerText = count;
          curr_price.innerText = "Rs. " + count * sum[1];
          var tmp = count * sum[1];
          sub_Total.innerText = "Rs." + (tmp + +temp);
          overall_Total.innerText = "Rs." + (tmp + +temp);
        }
        else{
            alert("Product quantity should not be less than 1")
        }
      });

      var show_qty = document.createElement("p");
      show_qty.innerText = 1;

      // Plus Quantity -----------

      let plus = document.createElement("p");
      plus.innerText = "+";

      plus.addEventListener("click", () => {
        if (count <= 9) {
          count++;
          show_qty.innerText = count;
          curr_price.innerText = "Rs. " + count * sum[1];
          var tmp = count * sum[1];
          sub_Total.innerText = "Rs." + (tmp + +temp);
          overall_Total.innerText = "Rs." + (tmp + +temp);
        }
      });

      let price = document.createElement("p");
      price.setAttribute("id", "pro_price");
      price.innerText = product.price;

      let sum = price.innerText.split(" ").map(Number);

      let curr_price = document.createElement("p"); 
      curr_price.innerText = product.price;
      curr_price.setAttribute("id", "cur_pri");

      qty_div.append(minus, show_qty, plus);

      div.append(img, name, qty_div, price, curr_price);

      cart_items.append(div);
      
      temp = temp + sum[1];

    });

    sub_Total.innerText = "Rs." + temp;
    overall_Total.innerText = "Rs." + temp;
  }
  
</script>